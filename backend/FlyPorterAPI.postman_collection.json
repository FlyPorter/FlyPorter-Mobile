{
  "info": {
    "_postman_id": "flyporter-api-collection",
    "name": "FlyPorter API",
    "description": "Complete API collection for the FlyPorter Mobile booking journey.\n\nSuggested flow using seed data:\n1. GET /flight ‚Üí selects a seed flight and stores flightId/bookingDate\n2. GET /seat/{{flightId}} ‚Üí stores seatNumber\n3. POST /auth/register or /auth/login ‚Üí stores authToken/userId\n4. PATCH /profile ‚Üí add passenger info (required)\n5. POST /payment/validate ‚Üí mock card check\n6. POST /bookings ‚Üí confirm booking (PDF invoice auto-uploaded to Digital Ocean Spaces)\n7. GET /pdf/invoice/{{bookingId}} ‚Üí get invoice download URL (optional)\n\nInvoice PDFs are automatically uploaded to Digital Ocean Spaces when bookings are created. The GET endpoint returns a fresh signed URL (valid for 1 hour) without needing to re-upload.\n\nSeed script also provisions admin helpers for creating custom flights when needed.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{authToken}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000/api",
      "type": "string"
    },
    {
      "key": "authToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "key": "flightId",
      "value": "",
      "type": "string"
    },
    {
      "key": "routeId",
      "value": "",
      "type": "string"
    },
    {
      "key": "bookingId",
      "value": "",
      "type": "string"
    },
    {
      "key": "seatNumber",
      "value": "",
      "type": "string"
    },
    {
      "key": "bookingDate",
      "value": "",
      "type": "string"
    },
    {
      "key": "invoiceUrl",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Flights",
      "item": [
        {
          "name": "List All Flights",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/flight",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "flight"
              ]
            },
            "description": "List all available flights (public). Automatically stores the first flight for quick testing."
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    const flights = Array.isArray(response.data) ? response.data : [];",
                  "    const firstFlight = flights[0];",
                  "    if (firstFlight && firstFlight.flight_id) {",
                  "        pm.collectionVariables.set('flightId', firstFlight.flight_id);",
                  "        console.log('‚úàÔ∏è Selected flight:', firstFlight.flight_id);",
                  "    }",
                  "    if (firstFlight && firstFlight.departure_time) {",
                  "        pm.collectionVariables.set('bookingDate', firstFlight.departure_time);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "description": "List available flights without filters (seed data ready to use). Selects the first result for quick testing."
        },
        {
          "name": "Get Flight by ID",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/flight/{{flightId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "flight",
                "{{flightId}}"
              ]
            },
            "description": "Get flight details by ID (no auth required)"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const flight = pm.response.json().data;",
                  "    if (flight && flight.flight_id) {",
                  "        pm.collectionVariables.set('flightId', flight.flight_id);",
                  "    }",
                  "    if (flight && flight.departure_time) {",
                  "        pm.collectionVariables.set('bookingDate', flight.departure_time);",
                  "    }",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Search Flights by Filters",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/flight/search?departure_airport=YYZ&destination_airport=YVR&date=2025-12-15",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "flight",
                "search"
              ],
              "query": [
                {
                  "key": "departure_airport",
                  "value": "YYZ"
                },
                {
                  "key": "destination_airport",
                  "value": "YVR"
                },
                {
                  "key": "date",
                  "value": "2025-12-15"
                }
              ]
            },
            "description": "Search flights with optional filters (public). Adjust query params as needed."
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    const flights = Array.isArray(response.data) ? response.data : [];",
                  "    const firstFlight = flights[0];",
                  "    if (firstFlight && firstFlight.flight_id) {",
                  "        pm.collectionVariables.set('flightId', firstFlight.flight_id);",
                  "        console.log('‚úàÔ∏è Selected filtered flight:', firstFlight.flight_id);",
                  "    }",
                  "    if (firstFlight && firstFlight.departure_time) {",
                  "        pm.collectionVariables.set('bookingDate', firstFlight.departure_time);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "description": "Run a filtered flight search. Selects the first matching result (if any) for downstream requests."
        }
      ],
      "description": "Flight search and details (public endpoints)"
    },
    {
      "name": "Seats",
      "item": [
        {
          "name": "Get Seats for Flight",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/seat/{{flightId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "seat",
                "{{flightId}}"
              ]
            },
            "description": "Get all seats for a flight (no auth required)"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    const seats = Array.isArray(response.data) ? response.data : [];",
                  "    const availableSeat = seats.find((seat) => seat.is_available);",
                  "    if (availableSeat) {",
                  "        pm.collectionVariables.set('seatNumber', availableSeat.seat_number);",
                  "        console.log('ü™ë Selected seat:', availableSeat.seat_number);",
                  "    }",
                  "}"
                ]
              }
            }
          ]
        }
      ],
      "description": "Seat availability (public). Run after choosing a flight to auto-select the first open seat."
    },
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.token) {",
                  "        pm.collectionVariables.set('authToken', response.data.token);",
                  "        console.log('Token saved:', response.data.token);",
                  "    }",
                  "    if (response.data && response.data.user && response.data.user.user_id) {",
                  "        pm.collectionVariables.set('userId', response.data.user.user_id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"customer@example.com\",\n  \"password\": \"password123\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            },
            "description": "Register a new customer account. All registered users are customers by default."
          },
          "response": []
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.token) {",
                  "        pm.collectionVariables.set('authToken', response.data.token);",
                  "        console.log('Token saved:', response.data.token);",
                  "    }",
                  "    if (response.data && response.data.user && response.data.user.user_id) {",
                  "        pm.collectionVariables.set('userId', response.data.user.user_id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"customer@example.com\",\n  \"password\": \"password123\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            },
            "description": "Login with email and password. Returns JWT token."
          },
          "response": []
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/logout",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "logout"
              ]
            },
            "description": "Logout (primarily client-side token removal)"
          },
          "response": []
        }
      ],
      "description": "Authentication endpoints for customer accounts."
    },
    {
      "name": "Profile",
      "item": [
        {
          "name": "Get Profile",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/profile",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "profile"
              ]
            },
            "description": "Get current user's profile (User + CustomerInfo)"
          },
          "response": []
        },
        {
          "name": "Update Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    console.log('‚úÖ Profile updated - Ready to book flights!');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"full_name\": \"John Doe\",\n  \"phone\": \"+1234567890\",\n  \"passport_number\": \"AB123456\",\n  \"date_of_birth\": \"1990-01-01\",\n  \"emergency_contact_name\": \"Jane Doe\",\n  \"emergency_contact_phone\": \"+0987654321\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/profile",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "profile"
              ]
            },
            "description": "‚ö†Ô∏è REQUIRED BEFORE BOOKING!\n\nUpdate current user's profile with passenger information. You MUST provide at least:\n- full_name\n- passport_number\n- date_of_birth\n\nWithout this, booking will fail with 'Customer information required' error."
          },
          "response": [],
          "description": "Update passenger details. full_name, passport_number, and date_of_birth are required before booking."
        }
      ],
      "description": "Profile management (must supply passenger info before booking)."
    },
    {
      "name": "Payment",
      "item": [
        {
          "name": "Validate Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    const valid = response.data && response.data.valid;",
                  "    if (valid) {",
                  "        console.log('üí≥ Payment details validated');",
                  "    } else {",
                  "        console.warn('Payment validation failed');",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"cardNumber\": \"4111111111111111\",\n  \"expiry\": \"2026-12\",\n  \"ccv\": \"123\",\n  \"bookingDate\": \"{{bookingDate}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/payment/validate",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "payment",
                "validate"
              ]
            },
            "description": "Mock payment validation. Call before creating a booking."
          },
          "response": []
        }
      ],
      "description": "Mock payment validation before confirming a booking."
    },
    {
      "name": "Bookings",
      "item": [
        {
          "name": "Create Booking",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    const booking = response.data;",
                  "    if (booking && booking.booking_id) {",
                  "        pm.collectionVariables.set('bookingId', booking.booking_id);",
                  "        console.log('‚úÖ Booking created with ID:', booking.booking_id);",
                  "    }",
                  "    if (booking && booking.confirmation_code) {",
                  "        console.log('üé´ Confirmation:', booking.confirmation_code);",
                  "    }",
                  "    if (booking && booking.seat_number) {",
                  "        pm.collectionVariables.set('seatNumber', booking.seat_number);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"flight_id\": {{flightId}},\n  \"seat_number\": \"{{seatNumber}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/bookings",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "bookings"
              ]
            },
            "description": "Create a booking using the selected flight and seat variables. Requires login, completed passenger profile, and a successful payment validation."
          },
          "response": [],
          "description": "Create a booking using the selected flight and seat. Requires login, completed profile, and a successful payment validation."
        },
        {
          "name": "Get All Bookings",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/bookings",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "bookings"
              ]
            },
            "description": "Get all bookings for logged-in user"
          },
          "response": []
        },
        {
          "name": "Get Upcoming Bookings",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/bookings?filter=upcoming",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "bookings"
              ],
              "query": [
                {
                  "key": "filter",
                  "value": "upcoming"
                }
              ]
            },
            "description": "Get only upcoming confirmed bookings"
          },
          "response": []
        },
        {
          "name": "Get Past Bookings",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/bookings?filter=past",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "bookings"
              ],
              "query": [
                {
                  "key": "filter",
                  "value": "past"
                }
              ]
            },
            "description": "Get past or cancelled bookings"
          },
          "response": []
        },
        {
          "name": "Get Booking by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/bookings/{{bookingId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "bookings",
                "{{bookingId}}"
              ]
            },
            "description": "Get a specific booking by ID"
          },
          "response": [],
          "description": "Retrieve a specific booking using the saved bookingId variable."
        },
        {
          "name": "Cancel Booking",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/bookings/{{bookingId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "bookings",
                "{{bookingId}}"
              ]
            },
            "description": "Cancel a booking (marks as cancelled and frees the seat)"
          },
          "response": [],
          "description": "Cancel the saved booking. Seat becomes available again."
        }
      ],
      "description": "Booking management. Run after selecting a flight/seat, completing your profile, and validating payment."
    },
    {
      "name": "Notifications",
      "item": [
        {
          "name": "Get All Notifications",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notifications",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "notifications"
              ]
            },
            "description": "Get all notifications for logged-in user"
          },
          "response": []
        },
        {
          "name": "Get Unread Count",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notifications/unread/count",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "notifications",
                "unread",
                "count"
              ]
            },
            "description": "Get count of unread notifications"
          },
          "response": []
        },
        {
          "name": "Mark as Read",
          "request": {
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notifications/1/read",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "notifications",
                "1",
                "read"
              ]
            },
            "description": "Mark a specific notification as read"
          },
          "response": []
        },
        {
          "name": "Mark All as Read",
          "request": {
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notifications/read-all",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "notifications",
                "read-all"
              ]
            },
            "description": "Mark all notifications as read"
          },
          "response": []
        }
      ],
      "description": "Notification management. Booking confirmations and cancellations appear here."
    },
    {
      "name": "PDF Invoices",
      "item": [
        {
          "name": "Get Invoice URL from Digital Ocean Spaces",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/pdf/invoice/{{bookingId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "pdf",
                "invoice",
                "{{bookingId}}"
              ]
            },
            "description": "‚≠ê RECOMMENDED: Get a signed URL for the invoice PDF stored in Digital Ocean Spaces.\n\n‚ú® How it works:\n1. When booking is created, PDF is automatically uploaded to Digital Ocean Spaces\n2. Call this endpoint to get a fresh signed URL (valid for 1 hour)\n3. Use the URL to download the PDF\n\n‚úÖ Features:\n- PDF stored in cloud (Digital Ocean Spaces)\n- Returns time-limited signed URL (1 hour validity)\n- URL regenerated each time (one-time use concept)\n- Private storage with secure access\n- No database storage needed\n\nüìã Requirements:\n- User must be logged in\n- User must own the booking (or be admin)\n- Digital Ocean Spaces must be configured\n\nüîß Setup:\nAdd to backend .env file:\n  SPACES_ENDPOINT=https://tor1.digitaloceanspaces.com\n  SPACES_REGION=tor1\n  SPACES_ACCESS_KEY=your-access-key\n  SPACES_SECRET_KEY=your-secret-key\n  SPACES_BUCKET=your-bucket-name"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.url) {",
                  "        const { url, expiresIn, expiresAt, filename } = response.data;",
                  "        console.log('‚úÖ Invoice URL generated successfully');",
                  "        console.log('üìÑ Filename:', filename);",
                  "        console.log('‚è±Ô∏è  Expires in:', expiresIn, 'seconds (', Math.floor(expiresIn / 60), 'minutes)');",
                  "        console.log('üìÖ Expires at:', expiresAt);",
                  "        console.log('üîó Signed URL:', url);",
                  "        ",
                  "        // Save the URL",
                  "        pm.collectionVariables.set('invoiceUrl', url);",
                  "        ",
                  "        console.log('');",
                  "        console.log('üí° Tip: Copy the URL and open in browser to download PDF');",
                  "    }",
                  "}",
                  "",
                  "if (pm.response.code === 500) {",
                  "    const response = pm.response.json();",
                  "    if (response.message && response.message.includes('not configured')) {",
                  "        console.warn('‚ö†Ô∏è  Digital Ocean Spaces is not configured!');",
                  "        console.log('Please set these environment variables in your .env file:');",
                  "        console.log('  SPACES_ENDPOINT=https://tor1.digitaloceanspaces.com');",
                  "        console.log('  SPACES_REGION=tor1');",
                  "        console.log('  SPACES_ACCESS_KEY=your-access-key');",
                  "        console.log('  SPACES_SECRET_KEY=your-secret-key');",
                  "        console.log('  SPACES_BUCKET=your-bucket-name');",
                  "    }",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Download Invoice (Direct Stream)",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    console.log('üìÑ Invoice PDF downloaded successfully (direct stream)');",
                  "    console.log('Content-Type:', pm.response.headers.get('Content-Type'));",
                  "    console.log('Content-Disposition:', pm.response.headers.get('Content-Disposition'));",
                  "    console.log('');",
                  "    console.log('‚ÑπÔ∏è  Note: This streams PDF directly from backend');",
                  "    console.log('For cloud storage, use the main invoice endpoint instead');",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/pdf/invoice/{{bookingId}}/download",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "pdf",
                "invoice",
                "{{bookingId}}",
                "download"
              ]
            },
            "description": "Alternative: Download PDF invoice directly from the backend (bypasses Digital Ocean Spaces).\n\nüéØ Use this when:\n- Digital Ocean Spaces is not configured\n- You want immediate download without cloud storage\n- Testing without DO setup\n\n‚ö†Ô∏è Note:\n- PDF is generated on-demand (no caching)\n- Higher backend load compared to Spaces\n- For production, use the main endpoint (GET /pdf/invoice/:id)\n\nüìã Requirements:\n- User must be logged in\n- User must own the booking (or be admin)"
          },
          "response": []
        }
      ],
      "description": "PDF invoice generation with automatic Digital Ocean Spaces upload. Invoices are automatically uploaded when bookings are created. Use GET /invoice/:id to retrieve a signed URL (1-hour validity, regenerated each time)."
    },
    {
      "name": "Customers",
      "item": [
        {
          "name": "Create Customer Info",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"user_id\": {{userId}},\n  \"full_name\": \"John Doe\",\n  \"phone\": \"+1234567890\",\n  \"passport_number\": \"AB123456\",\n  \"date_of_birth\": \"1990-01-01\",\n  \"emergency_contact_name\": \"Jane Doe\",\n  \"emergency_contact_phone\": \"+0987654321\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/customers",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "customers"
              ]
            },
            "description": "Create customer info. Customers can only create their own info, admins can create for any user."
          },
          "response": []
        },
        {
          "name": "Get Customer Info",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/customers/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "customers",
                "{{userId}}"
              ]
            },
            "description": "Get customer info by user ID. Customers can only view their own info, admins can view any user's info."
          },
          "response": []
        },
        {
          "name": "Update Customer Info",
          "request": {
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"full_name\": \"John Smith\",\n  \"phone\": \"+1234567890\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/customers/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "customers",
                "{{userId}}"
              ]
            },
            "description": "Update customer info by user ID. Customers can only update their own info, admins can update any user's info."
          },
          "response": []
        },
        {
          "name": "Delete Customer Info",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/customers/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "customers",
                "{{userId}}"
              ]
            },
            "description": "Delete customer info by user ID. Customers can only delete their own info, admins can delete any user's info."
          },
          "response": []
        }
      ],
      "description": "Customer information management. Usually handled via /profile for customers."
    },
    {
      "name": "Admin Setup",
      "item": [
        {
          "name": "1. Create Airline",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    console.log('‚úÖ Airline created successfully');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"airline_code\": \"FP\",\n  \"airline_name\": \"FlyPorter Airlines\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/airline",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "airline"
              ]
            },
            "description": "Admin: Create an airline (FlyPorter Airlines)"
          },
          "response": []
        },
        {
          "name": "2. Create Route",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.route_id) {",
                  "        pm.collectionVariables.set('routeId', response.data.route_id);",
                  "        console.log('‚úÖ Route created with ID:', response.data.route_id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"origin_airport_code\": \"YYZ\",\n  \"destination_airport_code\": \"YVR\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/route",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "route"
              ]
            },
            "description": "Admin: Create a route (YYZ to YVR)"
          },
          "response": []
        },
        {
          "name": "3. Create Flight",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.flight_id) {",
                  "        pm.collectionVariables.set('flightId', response.data.flight_id);",
                  "        console.log('‚úÖ Flight created with ID:', response.data.flight_id);",
                  "        console.log('ü™ë Seats auto-generated!');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"origin_airport_code\": \"YYZ\",\n  \"destination_airport_code\": \"YVR\",\n  \"airline_code\": \"FP\",\n  \"departure_time\": \"2025-12-15T08:00:00Z\",\n  \"arrival_time\": \"2025-12-15T11:30:00Z\",\n  \"base_price\": 249.99,\n  \"seat_capacity\": 24\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/flight",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "flight"
              ]
            },
            "description": "Admin: Create a flight with seats automatically generated"
          },
          "response": []
        },
        {
          "name": "4. View Generated Seats",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('‚úÖ Flight has', response.data.length, 'seats');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/seat/{{flightId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "seat",
                "{{flightId}}"
              ]
            },
            "description": "View all seats for the created flight"
          },
          "response": []
        },
        {
          "name": "Update Flight",
          "request": {
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"base_price\": 299.99\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/flight/{{flightId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "flight",
                "{{flightId}}"
              ]
            },
            "description": "Admin: Update flight details"
          },
          "response": []
        },
        {
          "name": "Delete Flight",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/flight/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "flight",
                "1"
              ]
            },
            "description": "Admin: Delete a flight"
          },
          "response": []
        },
        {
          "name": "Get All Airlines",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/airline",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "airline"
              ]
            },
            "description": "Get all airlines (public)"
          },
          "response": []
        },
        {
          "name": "Get All Routes",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/route",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "route"
              ]
            },
            "description": "Get all routes (public)"
          },
          "response": []
        }
      ],
      "description": "Admin endpoints for creating custom data. Seed script already creates sample flights and seats."
    },
    {
      "name": "Airports",
      "item": [
        {
          "name": "Get All Airports",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/airport",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "airport"
              ]
            },
            "description": "Get all airports (no auth required)"
          },
          "response": []
        }
      ],
      "description": "Airport information (public endpoints)."
    },
    {
      "name": "Cities",
      "item": [
        {
          "name": "Get All Cities",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/city",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "city"
              ]
            },
            "description": "Get all cities (no auth required)"
          },
          "response": []
        }
      ],
      "description": "City information (public endpoints)."
    }
  ]
}
